generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model EmbedMessage {
    id        String   @id
    raidName  Raid     @relation(fields: [raidId], references: [id])
    raidId    String   @unique
    channelId String
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Mode {
    id       String     @id @default(uuid())
    level    String
    raidMode RaidMode[]
    raid     Raid?      @relation(fields: [raidId], references: [id])
    raidId   String?
}

model RaidMode {
    id       String     @id @default(uuid())
    raidName Raid       @relation(fields: [raidId], references: [id])
    raidId   String
    mode     Mode       @relation(fields: [modeId], references: [id])
    modeId   String
    userRaid UserRaid[]
}

model Raid {
    id           String        @id @default(uuid())
    name         String        @unique
    embedMessage EmbedMessage?
    mode         Mode[]
    userRaid     UserRaid[]
    raidMode     RaidMode[]
}

model UserRaid {
    id         String   @id @default(uuid())
    when       String
    amount     Int
    raidName   Raid     @relation(fields: [raidId], references: [id])
    raidId     String
    raidMode   RaidMode @relation(fields: [raidModeId], references: [id])
    raidModeId String
    userId     String
    user       User?    @relation(fields: [userId], references: [id])
}

model User {
    id       String     @id
    guildId  String
    username String
    userRaid UserRaid[]
}
